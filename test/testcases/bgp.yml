---
defaults:
  module: bgp

testcases:
  - name: XXX add test cases
    arguments:
      bgp:
        enable: true
        bgp_as: 111
        router_id: 19.19.19.19
        maximum_paths: 3
        maximum_ecmp_paths: 14
        redistribute:
          - connected
          - aggregate
          - ospf
          - ospf3
        log_neighbor_changes: yes
        timers:
          keep_alive: 0
          hold: 0
        neighbors:
          - name: 10.1.1.1
            remote_as: 65002
            peer_group: demoleaf
            enable: true
            route_map_in: test_route
            send_community: true
            description: first neighbor
          - name: 10.1.1.3
            remote_as: 65002
            peer_group: demoleaf
            enable: true
            route_map_out: other_route
            next_hop_self: true
            description: second neighbor
        listeners:
          - name: 10.1.0.0/16
            peer_group: demoleaf
            remote_as: 65003
          - name: 10.2.0.0/16
            peer_group: demoleaf2
            remote_as: 65004
        networks:
          - prefix: 10.10.0.0
            masklen: 16
            routemap: testmap
          - prefix: 10.11.0.0
            masklen: 16
            state: present
          - prefix: 10.5.0.0
            masklen: 16
            state: absent
    setup: |
      no router bgp 111
      ip routing
    present: |
      router bgp 222
